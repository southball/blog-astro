---
import { format } from "date-fns";
import { Icon } from "astro-icon";
import type { CollectionEntry } from "astro:content";

export interface Props {
  post: CollectionEntry<"posts">;
}

const {
  id,
  data: { title, published, external, icon },
} = Astro.props.post;
---

<article>
  {
    icon ? (
      <Icon class="h-4 inline" name={icon} />
    ) : external ? (
      <Icon class="h-4 inline" name="ph:globe" />
    ) : (
      <Icon class="h-4 inline" name="ph:pen-nib" />
    )
  }
  <a
    class="underline underline-offset-4 leading-none"
    href={external ?? `/posts/${id.replace(/\.md$/, "")}`}>{title}</a
  >
  <span class="text-xs">{format(new Date(published), "yyyy-MM-dd")}</span>
</article>
